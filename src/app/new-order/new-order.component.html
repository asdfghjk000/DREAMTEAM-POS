<div *ngIf="isOrderVisible" class="order-container">
  <div class="order-section">
    <!-- Close Button (X) -->
    <button class="close-btn" (click)="closeOrder()">&#10005;</button>

    <h3>{{ isPaymentCompleted ? 'ORDER SUMMARY' : 'NEW ORDER' }}</h3>

    <!-- Displaying Order List when Payment is Not Completed -->
    <div *ngIf="!isPaymentCompleted" class="order-list">
      <table>
        <thead>
          <tr>
            <th>ITEM</th>
            <th>QUANTITY</th>
            <th>COST</th>
            <th>ACTION</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of products">
            <td>{{ item.productName }}</td>
            <td>
              <button (click)="decreaseQuantity(item)">-</button>
              {{ item.quantity }}
              <button (click)="increaseQuantity(item)">+</button>
            </td>
            <td>‚Ç± {{ item.price * item.quantity | number: '1.2-2' }}</td>
            <td>
              <button (click)="removeItem(item)">üóëÔ∏è</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Display Total when Payment is Not Completed -->
    <div *ngIf="!isPaymentCompleted" class="total">
      <span>TOTAL:</span>
      <span>‚Ç± {{ calculateTotal() | number: '1.2-2' }}</span>
    </div>

    <button *ngIf="!isPaymentCompleted" class="payment-btn" (click)="proceedToPayment()">PAYMENT</button>

    <!-- Display Order Summary when Payment is Completed -->
    <div *ngIf="isPaymentCompleted">
      <app-order-summary
        [newOrder]="products"
        (orderConfirmed)="handleConfirmOrder()"
        (cancel)="handleCancelOrder()">
      </app-order-summary>
    </div>
  </div>
</div>
