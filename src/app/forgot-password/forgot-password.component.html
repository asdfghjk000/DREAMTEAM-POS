<div class="forgot-password-container">
    <h2>Forgot Password</h2>
  
    <!-- Step 1: Enter Username -->
    <form #forgotPasswordForm="ngForm" (ngSubmit)="verifyUser()">
      <div *ngIf="isUsernameStep">
        <p>Enter your registered username to proceed.</p>
        <div class="input-group">
          <div class="input-wrapper">
            <i class="fas fa-user"></i> <!-- FontAwesome Icon for username -->
            <input
              type="text"
              id="username"
              name="username"
              [(ngModel)]="username"
              required
              placeholder="Username"
              #usernameInput="ngModel"
            />
          </div>
          <!-- Error message -->
          <div class="error-message" *ngIf="usernameInput.invalid && usernameInput.touched">
            A valid username is required.
          </div>
        </div>
        <button
          type="submit"
          [disabled]="forgotPasswordForm.invalid || isSubmitting"
          [class.loading]="isSubmitting"
        >
          <span *ngIf="!isSubmitting">Next</span>
          <span *ngIf="isSubmitting">Processing...</span>
        </button>
      </div>
  
       <!-- Step 2: Enter Email -->
  <form *ngIf="!isUsernameStep" #emailForm="ngForm" (ngSubmit)="submitEmail()">
    <p>Enter your registered email to reset your password.</p>
    <div class="input-group">
      <div class="input-wrapper">
        <i class="fas fa-envelope"></i> <!-- FontAwesome Icon for email -->
        <input
          type="email"
          id="email"
          name="email"
          [(ngModel)]="email"
          required
          placeholder="Email"
          #emailInput="ngModel"
        />
      </div>
      <div class="error-message" *ngIf="emailInput.invalid && emailInput.touched">
        A valid email is required.
      </div>
    </div>
    <button
      type="submit"
      [disabled]="emailForm.invalid || isSubmitting"
      [class.loading]="isSubmitting"
    >
      <span *ngIf="!isSubmitting">Submit</span>
      <span *ngIf="isSubmitting">Processing...</span>
    </button>
  </form>
  
      <div *ngIf="message" class="message">{{ message }}</div>
      <a (click)="navigateToMainPage()">Back to Login</a>
    </form>
  </div>
  